var v=(s,n,r)=>new Promise((x,l)=>{var m=o=>{try{a(r.next(o))}catch(h){l(h)}},c=o=>{try{a(r.throw(o))}catch(h){l(h)}},a=o=>o.done?x(o.value):Promise.resolve(o.value).then(m,c);a((r=r.apply(s,n)).next())});import{j as e}from"./ui-libs-CdhAi6Tc.js";import{r as d}from"./react-vendor-3BC6cITN.js";import{r as L}from"./index-CRsNqYr4.js";function A({rating:s}){return e.jsx("div",{className:"flex gap-1",children:[...Array(5)].map((n,r)=>e.jsx("svg",{className:`w-5 h-5 ${r<s?"text-yellow-400 fill-current":"text-gray-300"}`,viewBox:"0 0 20 20",children:e.jsx("path",{d:"M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"})},r))})}function f({review:s}){const n=s.videoUrl||s.video_url;return e.jsxs("div",{className:"bg-white rounded-xl sm:rounded-2xl shadow-xl border border-gray-200 overflow-hidden hover:shadow-2xl hover:scale-[1.02] transition-all duration-300 group",children:[n?e.jsxs("div",{className:"relative w-full aspect-video bg-gray-900 overflow-hidden",children:[e.jsxs("video",{controls:!0,className:"w-full h-full object-cover",preload:"metadata",playsInline:!0,onError:r=>{console.error("Video load error:",n,r)},children:[e.jsx("source",{src:n,type:"video/mp4"}),"Your browser does not support the video tag."]}),e.jsxs("div",{className:"absolute top-2 right-2 sm:top-3 sm:right-3 bg-purple-600 text-white px-2 sm:px-3 py-0.5 sm:py-1 rounded-full text-xs font-bold flex items-center gap-1 z-10 pointer-events-none",children:[e.jsx("svg",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"})}),e.jsx("span",{className:"hidden sm:inline",children:"Video Review"}),e.jsx("span",{className:"sm:hidden",children:"Video"})]})]}):e.jsx("div",{className:"relative w-full aspect-video bg-gray-200 flex items-center justify-center",children:e.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:"No video available"})}),e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 mb-3 sm:mb-4",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("img",{src:s.avatar||"https://ui-avatars.com/api/?name="+encodeURIComponent(s.name)+"&background=017233&color=fff&size=128",alt:s.name,className:"w-12 h-12 sm:w-14 sm:h-14 rounded-full object-cover border-3 border-white shadow-lg group-hover:scale-110 transition-transform ring-2 ring-gray-100"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 sm:w-6 sm:h-6 rounded-full bg-gradient-to-br from-[#017233] to-[#01994d] border-2 border-white flex items-center justify-center shadow-md",children:e.jsx("span",{className:"text-white text-[10px] sm:text-xs font-bold",children:"✓"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-gray-900 text-base sm:text-lg truncate",children:s.name}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500 truncate",children:s.location||"Traveler"})]})]}),e.jsx("div",{className:"mb-3 sm:mb-4",children:e.jsx(A,{rating:s.rating})}),s.review&&e.jsx("p",{className:"text-gray-700 leading-relaxed text-xs sm:text-sm line-clamp-3",children:s.review})]})]})}function V(){const[s,n]=d.useState([]),[r,x]=d.useState(!0),[l,m]=d.useState(!1),[c,a]=d.useState(0),[o,h]=d.useState(null),[u,g]=d.useState(null),w=d.useRef(null);d.useEffect(()=>{j()},[]),d.useEffect(()=>{a(0)},[l]);const j=()=>v(this,null,function*(){try{x(!0);const t=yield L.getAllReviews();n(t.reviews||[])}catch(t){console.error("Error fetching reviews:",t),n([])}finally{x(!1)}}),p=50,b=t=>{g(null),h(t.targetTouches[0].clientX)},N=t=>{g(t.targetTouches[0].clientX)},y=()=>{if(!o||!u)return;const t=o-u,i=t>p,T=t<-p,C=l?s:s.slice(0,6);i&&c<C.length-1&&a(c+1),T&&c>0&&a(c-1)},R=t=>{a(t)},S=()=>{const t=l?s:s.slice(0,6);a(i=>(i+1)%t.length)},k=()=>{const t=l?s:s.slice(0,6);a(i=>(i-1+t.length)%t.length)};return r?e.jsx("section",{className:"w-full bg-gradient-to-b from-gray-50 to-white py-12 md:py-16",children:e.jsx("div",{className:"mx-auto w-full px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white rounded-3xl shadow-2xl border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"p-6 md:p-8 lg:p-12",children:e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Loading reviews..."})})})})})}):s.length===0?null:e.jsx("section",{className:"w-full bg-gradient-to-b from-gray-50 to-white py-12 md:py-16",children:e.jsx("div",{className:"mx-auto w-full px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white rounded-3xl shadow-2xl border border-gray-200 overflow-hidden",children:e.jsxs("div",{className:"p-6 md:p-8 lg:p-12",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-[#017233] to-[#01994d] flex items-center justify-center text-white text-xl font-bold shadow-lg",children:"⭐"}),e.jsx("h2",{className:"text-3xl md:text-4xl lg:text-5xl font-bold text-gray-900",children:"Traveller Reviews"})]})}),e.jsxs("div",{className:"md:hidden relative",children:[e.jsx("div",{ref:w,className:"overflow-hidden touch-pan-x",style:{touchAction:"pan-x"},onTouchStart:b,onTouchMove:N,onTouchEnd:y,children:e.jsx("div",{className:"flex transition-transform duration-300 ease-in-out",style:{transform:`translateX(-${c*100}%)`},children:(l?s:s.slice(0,6)).map(t=>e.jsx("div",{className:"min-w-full px-2",children:e.jsx(f,{review:t})},t.id))})}),(l?s:s.slice(0,6)).length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:k,className:"absolute left-2 top-1/2 -translate-y-1/2 bg-white/90 hover:bg-white text-gray-900 rounded-full p-2 shadow-lg transition-all z-10","aria-label":"Previous review",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("button",{onClick:S,className:"absolute right-2 top-1/2 -translate-y-1/2 bg-white/90 hover:bg-white text-gray-900 rounded-full p-2 shadow-lg transition-all z-10","aria-label":"Next review",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),(l?s:s.slice(0,6)).length>1&&e.jsx("div",{className:"flex justify-center gap-2 mt-4",children:(l?s:s.slice(0,6)).map((t,i)=>e.jsx("button",{onClick:()=>R(i),className:`h-2 rounded-full transition-all ${i===c?"w-8 bg-[#017233]":"w-2 bg-gray-300 hover:bg-gray-400"}`,"aria-label":`Go to review ${i+1}`},i))})]}),e.jsx("div",{className:"hidden md:grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:(l?s:s.slice(0,6)).map(t=>e.jsx(f,{review:t},t.id))}),s.length>6&&e.jsx("div",{className:"mt-8 flex justify-center",children:e.jsx("button",{type:"button",onClick:()=>m(!l),className:"bg-gradient-to-br from-[#017233] to-[#01994d] text-white px-8 py-3 rounded-xl font-bold text-base hover:shadow-xl hover:scale-105 transition-all duration-300 shadow-lg",children:l?"Show Less":"Show All Reviews"})})]})})})})}export{V as R};
