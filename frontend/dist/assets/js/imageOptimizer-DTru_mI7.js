const l=t=>!t||typeof t!="string"?!1:t.includes("cloudinary.com")||t.includes("res.cloudinary.com"),m=(t,f={})=>{if(!t||typeof t!="string")return t||"";if(!l(t))return t;const{width:s,height:e,quality:p="auto",format:a="auto",crop:c="limit",lazy:h=!1}=f;try{const o=new URL(t),n=o.pathname.split("/"),r=n.indexOf("upload");if(r===-1)return t;const i=[];s&&i.push(`w_${s}`),e&&i.push(`h_${e}`),i.push(`q_${p}`),a==="auto"?i.push("f_auto"):i.push(`f_${a}`),c&&i.push(`c_${c}`),h&&i.push("e_blur:400");const u=i.length>0?`${i.join(",")}/`:"";return n[r+1]&&n[r+1].startsWith("v"),n.splice(r+1,0,u),o.pathname=n.join("/"),o.toString()}catch(o){return console.warn("Error optimizing image URL:",o),t}},d=t=>m(t,{width:"400",quality:"auto",format:"auto",crop:"fill"});export{d as g};
