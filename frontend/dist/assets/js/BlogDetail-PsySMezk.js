var w=(i,j,l)=>new Promise((x,f)=>{var u=r=>{try{d(l.next(r))}catch(g){f(g)}},b=r=>{try{d(l.throw(r))}catch(g){f(g)}},d=r=>r.done?x(r.value):Promise.resolve(r.value).then(u,b);d((l=l.apply(i,j)).next())});import{j as e}from"./ui-libs-D7quiBqG.js";import{f as B,b as I,r as p}from"./react-vendor-DREZjZ3y.js";import{S}from"./SEO-DMXO4XCf.js";import{e as N}from"./index-vFyLetUi.js";function L(){var g;const{id:i}=B(),j=I(),[l,x]=p.useState(null),[f,u]=p.useState(!0),[b,d]=p.useState(null);p.useEffect(()=>{if(!i){u(!1),x(null);return}let n=!1;return w(this,null,function*(){u(!0),d(null);try{let s=null;try{const t=yield N.getBlogById(i);s=t!=null&&t.blog?t:null}catch(t){s=null}if(!s&&i)try{const t=yield N.getBlogBySlug(i);s=t!=null&&t.blog?t:null}catch(t){s=null}if(n)return;s!=null&&s.blog?x(s.blog):x(null)}catch(s){if(n)return;d(s.message||"Failed to load blog"),x(null)}finally{n||u(!1)}}),()=>{n=!0}},[i]);const r=p.useMemo(()=>{if(!(l!=null&&l.content))return[];try{const n=l.content,a=/<div[^>]*class="[^"]*my-8[^"]*"[^>]*>[\s\S]*?<\/div>/gi,s=[];let t=0;const c=[];let h;for(;(h=a.exec(n))!==null;)c.push({index:h.index,length:h[0].length,fullMatch:h[0]});c.forEach(o=>{const v=n.substring(t,o.index).trim();v&&s.push({type:"text",content:v});const y=o.fullMatch.match(/<img[^>]*src=["']([^"']*)["'][^>]*alt=["']([^"']*)["'][^>]*>/i);y&&s.push({type:"image",src:y[1],alt:y[2]||""}),t=o.index+o.length});const m=n.substring(t).trim();return m&&s.push({type:"text",content:m}),s.length===0?[{type:"text",content:n}]:s}catch(n){return console.error("Error parsing content:",n),[{type:"text",content:l.content}]}},[l==null?void 0:l.content]);return f?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-[#017233] border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading blog..."})]})}):l?e.jsxs(e.Fragment,{children:[e.jsx(S,{title:`${l.title} | Safe Hands Travels`,description:l.description||l.metaDescription||"",keywords:(g=l.metaKeywords)!=null&&g.length?l.metaKeywords.join(", "):`${l.title}, travel blog, India travel, Safe Hands Travels`,image:l.heroImage||l.hero_image||"",url:`/blog/${l.slug||i}`}),e.jsxs("div",{className:"min-h-screen bg-white text-gray-900 font-sans",children:[e.jsxs("section",{className:"relative w-full h-[60vh] md:h-[70vh]",children:[e.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:`url(${l.heroImage||l.hero_image||"https://images.unsplash.com/photo-1506905925346-21bda4d32df4?auto=format&fit=crop&w=1920&q=80"})`},children:e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/40 to-black/20"})}),e.jsx("div",{className:"relative z-10 h-full flex items-end",children:e.jsx("div",{className:"w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-8 md:pb-12",children:e.jsx("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold text-white drop-shadow-2xl max-w-4xl",children:l.title})})})]}),e.jsx("section",{className:"py-8 md:py-16",children:e.jsxs("div",{className:"mx-auto w-full max-w-7xl px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-12 text-center",children:e.jsx("p",{className:"text-xl md:text-2xl text-gray-700 leading-relaxed font-medium max-w-3xl mx-auto",children:l.description})}),(()=>{if(!r||r.length===0)return e.jsx("div",{className:"blog-content text-gray-700 prose prose-lg max-w-4xl mx-auto",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:l.content},style:{lineHeight:"1.75"}})});const n=[];let a="",s=0;return r.forEach(t=>{t.type==="text"?a+=t.content:t.type==="image"&&(a.trim()?(n.push({text:a.trim(),image:t,index:s++}),a=""):n.push({text:"",image:t,index:s++}))}),a.trim()&&n.push({text:a.trim(),image:null,index:s++}),n.map((t,c)=>{const h=c%2===0,m=t.image!==null,o=t.text!=="";return!m&&o?e.jsx("div",{className:"mb-12 md:mb-16",children:e.jsx("div",{className:"blog-content text-gray-700 prose prose-lg max-w-4xl mx-auto",dangerouslySetInnerHTML:{__html:t.text},style:{lineHeight:"1.75"}})},c):m&&!o?e.jsx("div",{className:"mb-12 md:mb-16",children:e.jsx("img",{src:t.image.src,alt:t.image.alt,className:"w-full h-[400px] md:h-[500px] lg:h-[600px] rounded-2xl shadow-2xl object-cover"})},c):e.jsx("div",{className:"mb-12 md:mb-20",children:e.jsxs("div",{className:`flex flex-col ${h?"lg:flex-row":"lg:flex-row-reverse"} gap-8 lg:gap-12 items-start`,children:[m&&e.jsx("div",{className:"w-full lg:w-1/2",children:e.jsx("img",{src:t.image.src,alt:t.image.alt,className:"w-full h-[400px] md:h-[500px] lg:h-[600px] rounded-2xl shadow-2xl object-cover"})}),o&&e.jsx("div",{className:`w-full ${m?"lg:w-1/2":"lg:w-full"}`,children:e.jsx("div",{className:"blog-content text-gray-700 prose prose-lg max-w-none",dangerouslySetInnerHTML:{__html:t.text},style:{lineHeight:"1.75"}})})]})},c)})})()]})})]}),e.jsx("style",{children:`
        .blog-content h2 {
          margin-top: 2rem;
          margin-bottom: 1rem;
          color: #111827;
          font-weight: 700;
        }
        .blog-content p {
          margin-bottom: 1.5rem;
          color: #374151;
        }
        .blog-content img {
          margin: 2rem 0;
          border-radius: 1rem;
          box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
      `})]}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center px-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Blog not found"}),b&&e.jsx("p",{className:"text-gray-600 mb-4 text-sm",children:b}),e.jsx("button",{onClick:()=>j("/experiences"),className:"px-6 py-2 bg-[#017233] text-white rounded-lg hover:bg-[#01994d] transition-colors",children:"Back to Blogs"})]})})}export{L as default};
