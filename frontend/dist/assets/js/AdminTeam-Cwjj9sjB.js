var R=Object.defineProperty,W=Object.defineProperties;var X=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var L=(r,t,l)=>t in r?R(r,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):r[t]=l,k=(r,t)=>{for(var l in t||(t={}))G.call(t,l)&&L(r,l,t[l]);if(E)for(var l of E(t))H.call(t,l)&&L(r,l,t[l]);return r},C=(r,t)=>W(r,X(t));var m=(r,t,l)=>new Promise((N,p)=>{var h=n=>{try{x(l.next(n))}catch(d){p(d)}},T=n=>{try{x(l.throw(n))}catch(d){p(d)}},x=n=>n.done?N(n.value):Promise.resolve(n.value).then(h,T);x((l=l.apply(r,t)).next())});import{j as e,L as F,y as J,p as K,X as Q,z as V,l as Y,o as A,k as M,T as O}from"./ui-libs-D7quiBqG.js";import{b as Z,r as c}from"./react-vendor-DREZjZ3y.js";import{u as ee,j as se,n as j,P as te,o as le}from"./index-vFyLetUi.js";const ie=()=>{const r=Z(),t=ee(),[l,N]=c.useState([]),[p,h]=c.useState(!0),[T,x]=c.useState(null),[n,d]=c.useState(!1),[b,P]=c.useState(null),[u,D]=c.useState(""),[q,I]=c.useState(!1),[a,g]=c.useState({name:"",position:"",bio:"",photoUrl:"",photoPublicId:"",email:"",phone:"",socialLinkedIn:"",socialTwitter:"",socialFacebook:"",status:"active",displayOrder:0});c.useEffect(()=>{z()},[]);const z=()=>m(void 0,null,function*(){try{const s=yield se.getCurrentUser();if(s.user){if(x(s.user),s.user.role!=="admin"&&s.user.role!=="main_admin"){t.error("Access denied. Admin privileges required."),r("/");return}v()}}catch(s){console.error("Error checking auth:",s),t.error("Please login to continue"),r("/login")}}),v=()=>m(void 0,null,function*(){try{h(!0);const s=yield j.getAllTeamsAdmin();N(s.teams||[])}catch(s){console.error("Error fetching teams:",s),t.error(s.message||"Failed to load teams")}finally{h(!1)}}),i=s=>{const{name:o,value:w}=s.target;g($=>C(k({},$),{[o]:w}))},B=s=>m(void 0,null,function*(){try{I(!0);const o=yield le.uploadImage(s);g(w=>C(k({},w),{photoUrl:o.url,photoPublicId:o.public_id})),t.success("Photo uploaded successfully!")}catch(o){console.error("Error uploading file:",o),t.error(o.message||"Failed to upload photo")}finally{I(!1)}}),_=s=>m(void 0,null,function*(){s.preventDefault();try{b?(yield j.updateTeam(b.id,a),t.success("Team member updated successfully!")):(yield j.createTeam(a),t.success("Team member created successfully!")),f(),v()}catch(o){console.error("Error saving team member:",o),t.error(o.message||"Failed to save team member")}}),S=s=>{P(s),g({name:s.name||"",position:s.position||"",bio:s.bio||"",photoUrl:s.photoUrl||"",photoPublicId:s.photoPublicId||"",email:s.email||"",phone:s.phone||"",socialLinkedIn:s.socialLinkedIn||"",socialTwitter:s.socialTwitter||"",socialFacebook:s.socialFacebook||"",status:s.status||"active",displayOrder:s.displayOrder||0}),d(!0)},U=s=>m(void 0,null,function*(){if(window.confirm("Are you sure you want to delete this team member? This action cannot be undone."))try{yield j.deleteTeam(s),t.success("Team member deleted successfully!"),v()}catch(o){console.error("Error deleting team member:",o),t.error(o.message||"Failed to delete team member")}}),f=()=>{g({name:"",position:"",bio:"",photoUrl:"",photoPublicId:"",email:"",phone:"",socialLinkedIn:"",socialTwitter:"",socialFacebook:"",status:"active",displayOrder:0}),P(null),d(!1)},y=l.filter(s=>u?s.name.toLowerCase().includes(u.toLowerCase())||s.position&&s.position.toLowerCase().includes(u.toLowerCase())||s.email&&s.email.toLowerCase().includes(u.toLowerCase()):!0);return p?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-purple-50",children:e.jsx(F,{className:"w-12 h-12 animate-spin text-blue-600"})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 pt-24 pb-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6 sm:mb-8 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-black bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-2",children:"Manage Team Members"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Add, edit, and manage team member profiles"})]}),e.jsxs("button",{onClick:()=>{f(),d(!0)},className:"w-full sm:w-auto px-4 sm:px-6 py-2 sm:py-3 bg-blue-600 text-white rounded-xl font-bold hover:bg-blue-700 transition-all duration-300 flex items-center justify-center gap-2 shadow-lg hover:shadow-xl text-sm sm:text-base",children:[e.jsx(J,{className:"w-4 h-4 sm:w-5 sm:h-5"}),e.jsx("span",{className:"whitespace-nowrap",children:"Add Team Member"})]})]}),!n&&e.jsx("div",{className:"mb-4 sm:mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(K,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4 sm:w-5 sm:h-5"}),e.jsx("input",{type:"text",placeholder:"Search team members...",value:u,onChange:s=>D(s.target.value),className:"w-full pl-9 sm:pl-10 pr-4 py-2 sm:py-3 text-sm sm:text-base border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all duration-300"})]})}),n&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[200] flex items-center justify-center p-2 sm:p-4 overflow-y-auto pt-20 sm:pt-4",children:e.jsxs("div",{className:"bg-white rounded-xl sm:rounded-2xl shadow-2xl max-w-3xl w-full max-h-[95vh] sm:max-h-[90vh] overflow-y-auto my-4",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-4 sm:p-6 flex items-center justify-between z-10 shadow-sm",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:b?"Edit Team Member":"Add New Team Member"}),e.jsx("button",{onClick:f,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close",children:e.jsx(Q,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]}),e.jsxs("form",{onSubmit:_,className:"p-4 sm:p-6 space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Name *"}),e.jsx("input",{type:"text",name:"name",value:a.name,onChange:i,required:!0,className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Position *"}),e.jsx("input",{type:"text",name:"position",value:a.position,onChange:i,required:!0,placeholder:"e.g., CEO, Travel Expert",className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Bio"}),e.jsx("textarea",{name:"bio",value:a.bio,onChange:i,rows:4,placeholder:"Brief description about the team member...",className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Photo"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 sm:gap-4",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:s=>s.target.files[0]&&B(s.target.files[0]),className:"hidden",id:"photo-upload"}),e.jsxs("label",{htmlFor:"photo-upload",className:"px-3 sm:px-4 py-2 bg-blue-100 text-blue-700 rounded-lg font-semibold hover:bg-blue-200 transition-colors cursor-pointer flex items-center gap-2 text-sm sm:text-base",children:[q?e.jsx(F,{className:"w-4 h-4 animate-spin"}):e.jsx(V,{className:"w-4 h-4"}),a.photoUrl?"Change Photo":"Upload Photo"]}),a.photoUrl&&e.jsx("img",{src:a.photoUrl,alt:"Team member",className:"w-20 h-20 sm:w-24 sm:h-24 object-cover rounded-full border-2 border-gray-200"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email"}),e.jsx("input",{type:"email",name:"email",value:a.email,onChange:i,placeholder:"email@example.com",className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Phone ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(te,{value:a.phone,onChange:s=>i({target:{name:"phone",value:s}}),required:!0,placeholder:"Enter phone number",className:"rounded-lg border-gray-200 focus-within:ring-blue-500 focus-within:border-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Social Media Links"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"LinkedIn"}),e.jsx("input",{type:"url",name:"socialLinkedIn",value:a.socialLinkedIn,onChange:i,placeholder:"https://linkedin.com/in/...",className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Twitter"}),e.jsx("input",{type:"url",name:"socialTwitter",value:a.socialTwitter,onChange:i,placeholder:"https://twitter.com/...",className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Facebook"}),e.jsx("input",{type:"url",name:"socialFacebook",value:a.socialFacebook,onChange:i,placeholder:"https://facebook.com/...",className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none text-sm"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Display Order"}),e.jsx("input",{type:"number",name:"displayOrder",value:a.displayOrder,onChange:i,min:"0",className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{name:"status",value:a.status,onChange:i,className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 pt-4 border-t",children:[e.jsxs("button",{type:"submit",className:"w-full sm:w-auto px-4 sm:px-6 py-2 sm:py-3 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700 transition-all flex items-center justify-center gap-2 text-sm sm:text-base",children:[e.jsx(Y,{className:"w-4 h-4 sm:w-5 sm:h-5"}),b?"Update Team Member":"Create Team Member"]}),e.jsx("button",{type:"button",onClick:f,className:"w-full sm:w-auto px-4 sm:px-6 py-2 sm:py-3 bg-gray-200 text-gray-700 rounded-lg font-bold hover:bg-gray-300 transition-all text-sm sm:text-base",children:"Cancel"})]})]})]})}),!n&&e.jsxs("div",{className:"bg-white rounded-xl sm:rounded-2xl shadow-xl border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"block sm:hidden",children:y.length===0?e.jsx("div",{className:"p-8 text-center text-gray-500",children:"No team members found"}):e.jsx("div",{className:"divide-y divide-gray-200",children:y.map(s=>e.jsx("div",{className:"p-4 hover:bg-gray-50",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:s.photoUrl?e.jsx("img",{src:s.photoUrl,alt:s.name,className:"w-16 h-16 object-cover rounded-full"}):e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center",children:e.jsx(A,{className:"w-8 h-8 text-gray-400"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:s.name}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-semibold ${s.status==="active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:s.status})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:s.position}),s.email&&e.jsx("p",{className:"text-xs text-gray-500 truncate",children:s.email}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("button",{onClick:()=>S(s),className:"p-1.5 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Edit",children:e.jsx(M,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>U(s.id),className:"p-1.5 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:e.jsx(O,{className:"w-4 h-4"})})]})]})]})},s.id))})}),e.jsx("div",{className:"hidden sm:block overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 lg:px-6 py-3 lg:py-4 text-left text-xs sm:text-sm font-semibold text-gray-700",children:"Photo"}),e.jsx("th",{className:"px-4 lg:px-6 py-3 lg:py-4 text-left text-xs sm:text-sm font-semibold text-gray-700",children:"Name"}),e.jsx("th",{className:"px-4 lg:px-6 py-3 lg:py-4 text-left text-xs sm:text-sm font-semibold text-gray-700",children:"Position"}),e.jsx("th",{className:"px-4 lg:px-6 py-3 lg:py-4 text-left text-xs sm:text-sm font-semibold text-gray-700",children:"Email"}),e.jsx("th",{className:"px-4 lg:px-6 py-3 lg:py-4 text-left text-xs sm:text-sm font-semibold text-gray-700",children:"Status"}),e.jsx("th",{className:"px-4 lg:px-6 py-3 lg:py-4 text-left text-xs sm:text-sm font-semibold text-gray-700",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:y.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-12 text-center text-gray-500",children:"No team members found"})}):y.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 lg:px-6 py-3 lg:py-4",children:s.photoUrl?e.jsx("img",{src:s.photoUrl,alt:s.name,className:"w-12 h-12 rounded-full object-cover"}):e.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center",children:e.jsx(A,{className:"w-6 h-6 text-gray-400"})})}),e.jsx("td",{className:"px-4 lg:px-6 py-3 lg:py-4",children:e.jsx("span",{className:"font-semibold text-gray-900 text-sm sm:text-base",children:s.name})}),e.jsx("td",{className:"px-4 lg:px-6 py-3 lg:py-4 text-gray-700 text-sm sm:text-base",children:s.position||"-"}),e.jsx("td",{className:"px-4 lg:px-6 py-3 lg:py-4 text-gray-700 text-sm sm:text-base",children:s.email||"-"}),e.jsx("td",{className:"px-4 lg:px-6 py-3 lg:py-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${s.status==="active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:s.status})}),e.jsx("td",{className:"px-4 lg:px-6 py-3 lg:py-4",children:e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx("button",{onClick:()=>S(s),className:"p-1.5 sm:p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Edit",children:e.jsx(M,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>U(s.id),className:"p-1.5 sm:p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:e.jsx(O,{className:"w-4 h-4"})})]})})]},s.id))})]})})]})]})})};export{ie as default};
