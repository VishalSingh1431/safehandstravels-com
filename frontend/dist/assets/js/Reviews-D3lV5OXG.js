var m=(s,r,t)=>new Promise((o,n)=>{var l=i=>{try{a(t.next(i))}catch(c){n(c)}},d=i=>{try{a(t.throw(i))}catch(c){n(c)}},a=i=>i.done?o(i.value):Promise.resolve(i.value).then(l,d);a((t=t.apply(s,r)).next())});import{j as e}from"./ui-libs-D7quiBqG.js";import{r as x}from"./react-vendor-DREZjZ3y.js";import{r as h}from"./index-vFyLetUi.js";function u({rating:s}){return e.jsx("div",{className:"flex gap-1",children:[...Array(5)].map((r,t)=>e.jsx("svg",{className:`w-5 h-5 ${t<s?"text-yellow-400 fill-current":"text-gray-300"}`,viewBox:"0 0 20 20",children:e.jsx("path",{d:"M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"})},t))})}function p({review:s}){const r=s.videoUrl||s.video_url,o=r?(l=>{if(!l)return null;if(!l.includes("youtube.com")&&!l.includes("youtu.be"))return l.length===11?l:null;const d=/(?:youtube\.com\/(?:watch\?v=|shorts\/|embed\/)|youtu\.be\/)([^#&?\/\s]{11})/,a=l.match(d);return a&&a[1]&&a[1].length===11?a[1]:null})(r):null,n=o!==null;return e.jsxs("div",{className:"bg-white rounded-xl sm:rounded-2xl shadow-xl border border-gray-200 overflow-hidden hover:shadow-2xl hover:scale-[1.02] transition-all duration-300 group flex flex-col h-full w-full min-h-[480px] sm:min-h-[520px]",children:[r?e.jsxs("div",{className:"relative w-full h-48 sm:h-56 bg-gray-900 overflow-hidden flex-shrink-0",children:[n?e.jsx("iframe",{src:`https://www.youtube.com/embed/${o}?rel=0&modestbranding=1`,className:"w-full h-full",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:`${s.name}'s review video`}):e.jsxs("video",{controls:!0,className:"w-full h-full object-cover",preload:"metadata",playsInline:!0,onError:l=>{console.error("Video load error:",r,l)},children:[e.jsx("source",{src:r,type:"video/mp4"}),"Your browser does not support the video tag."]}),e.jsxs("div",{className:"absolute top-2 right-2 sm:top-3 sm:right-3 bg-purple-600 text-white px-2 sm:px-3 py-0.5 sm:py-1 rounded-full text-xs font-bold flex items-center gap-1 z-10 pointer-events-none",children:[e.jsx("svg",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"})}),e.jsx("span",{className:"hidden sm:inline",children:"Video Review"}),e.jsx("span",{className:"sm:hidden",children:"Video"})]})]}):e.jsx("div",{className:"relative w-full h-48 sm:h-56 bg-gray-200 flex items-center justify-center flex-shrink-0",children:e.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:"No video available"})}),e.jsxs("div",{className:"p-4 sm:p-6 flex-1 flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 mb-3 sm:mb-4",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("img",{src:s.avatar||"https://ui-avatars.com/api/?name="+encodeURIComponent(s.name)+"&background=017233&color=fff&size=128",alt:s.name,className:"w-12 h-12 sm:w-14 sm:h-14 rounded-full object-cover border-3 border-white shadow-lg group-hover:scale-110 transition-transform ring-2 ring-gray-100"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 sm:w-6 sm:h-6 rounded-full bg-gradient-to-br from-[#017233] to-[#01994d] border-2 border-white flex items-center justify-center shadow-md",children:e.jsx("span",{className:"text-white text-[10px] sm:text-xs font-bold",children:"✓"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-gray-900 text-base sm:text-lg truncate",children:s.name}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500 truncate",children:s.location||"Traveler"})]})]}),e.jsx("div",{className:"mb-3 sm:mb-4",children:e.jsx(u,{rating:s.rating})}),s.review&&e.jsx("p",{className:"text-gray-700 leading-relaxed text-xs sm:text-sm line-clamp-3",children:s.review})]})]})}function b(){const[s,r]=x.useState([]),[t,o]=x.useState(!0);x.useEffect(()=>{n()},[]);const n=()=>m(this,null,function*(){try{o(!0);const l=yield h.getAllReviews();r(l.reviews||[])}catch(l){console.error("Error fetching reviews:",l),r([])}finally{o(!1)}});return t?e.jsx("section",{className:"w-full bg-gradient-to-b from-gray-50 to-white py-4 md:py-6",children:e.jsx("div",{className:"mx-auto w-full px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white rounded-3xl shadow-2xl border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"p-6 md:p-8 lg:p-12",children:e.jsx("div",{className:"text-center py-6",children:e.jsx("p",{className:"text-gray-600",children:"Loading reviews..."})})})})})}):s.length===0?null:e.jsx("section",{className:"w-full bg-gradient-to-b from-gray-50 to-white py-4 md:py-6",children:e.jsx("div",{className:"mx-auto w-full px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white rounded-3xl shadow-2xl border border-gray-200 overflow-hidden",children:e.jsxs("div",{className:"p-6 md:p-8 lg:p-12",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-[#017233] to-[#01994d] flex items-center justify-center text-white text-xl font-bold shadow-lg",children:"⭐"}),e.jsx("h2",{className:"text-3xl md:text-4xl lg:text-5xl font-bold text-gray-900",children:"Traveller Reviews"})]})}),e.jsx("div",{className:"overflow-x-auto pb-4 -mx-4 px-4 scrollbar-hide",children:e.jsx("div",{className:"flex gap-4 md:gap-6 min-w-max",children:s.map(l=>e.jsx("div",{className:"flex-shrink-0 w-[280px] sm:w-[320px] md:w-[350px] lg:w-[380px]",children:e.jsx(p,{review:l})},l.id))})})]})})})})}export{b as R};
